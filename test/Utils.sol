// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";
import "../contracts/OmniCodec.sol";

library TestUtils {
    // test blocks match blocks in omni/testutils/testutils.go

    function getTestOmniBlock1() internal pure returns (OmniCodec.Block memory) {
        OmniCodec.Tx[] memory txs = new OmniCodec.Tx[](1);

        txs[0] = OmniCodec.Tx({
            sourceTxHash: 0x4452fa2556da20ae32c24b49df403b44c5a1b1f6f3ebfc1b7bb895dde3c66e27,
            sourceChain: "omni",
            destChain: "chain-a",
            nonce: 10,
            from: 0x26C27084a98595CB3C5443c4d5e45232B052350E,
            to: 0xe3481474b23f88a8917DbcB4cBC55Efcf0f68CC7,
            value: 0,
            paid: 0,
            gasLimit: 0,
            data: hex"d09de08a"
        });

        return OmniCodec.Block({
            sourceChain: "omni",
            parentHash: bytes32(0),
            hash: 0xc5c8fc8385772657dc025e03b4e4cd05b55eaddf0befac2ded2db52e8629d7d2,
            number: 100,
            txs: txs
        });
    }


    function getTestOmniBlock1Encoded() internal pure returns (bytes memory) {
        return
        hex"000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000c5c8fc8385772657dc025e03b4e4cd05b55eaddf0befac2ded2db52e8629d7d2000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000046f6d6e6900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000204452fa2556da20ae32c24b49df403b44c5a1b1f6f3ebfc1b7bb895dde3c66e2700000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000026c27084a98595cb3c5443c4d5e45232b052350e000000000000000000000000e3481474b23f88a8917dbcb4cbc55efcf0f68cc700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000046f6d6e69000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007636861696e2d61000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004d09de08a00000000000000000000000000000000000000000000000000000000";
    }

    function getTestOmniBlock2() internal pure returns (OmniCodec.Block memory) {
        OmniCodec.Block memory b = getTestOmniBlock1();

        b.parentHash = b.hash;
        b.hash = 0x110a18023b8b67cbf89941bae488bb46495b7a1b9d68e6aebfd172e445ab7e14;
        b.number += 1;
        b.txs[0].nonce += 1;
        b.txs[0].sourceTxHash = 0x7e0b910cc013d99a37aff3371df326e0299435b38d68a6e9aef17194ac6a6c37;

        return b;
    }


    function getTestOmniBlock2Encoded() internal pure returns (bytes memory) {
        return
        hex"000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a0c5c8fc8385772657dc025e03b4e4cd05b55eaddf0befac2ded2db52e8629d7d2110a18023b8b67cbf89941bae488bb46495b7a1b9d68e6aebfd172e445ab7e14000000000000000000000000000000000000000000000000000000000000006500000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000046f6d6e6900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000207e0b910cc013d99a37aff3371df326e0299435b38d68a6e9aef17194ac6a6c3700000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000b00000000000000000000000026c27084a98595cb3c5443c4d5e45232b052350e000000000000000000000000e3481474b23f88a8917dbcb4cbc55efcf0f68cc700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000046f6d6e69000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007636861696e2d61000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004d09de08a00000000000000000000000000000000000000000000000000000000";
    }
    function getTestOmniBlock1Sigs() internal pure returns (bytes[] memory) {
        bytes[] memory sigs = new bytes[](1);

        // sig for first omni block
        // signatures generated in omni/orchestrator go test
        sigs[0] =
            hex"f2a1868f06c5265ba181c2e45bae07caeed452adc49425e5bc8cf947fd10310c343be59a1b6bb3d5a426e0578097a59f7e67b47acf96d51efc93cdee5150206c1b";
        return sigs;
    }


    function getTestOmniBlock2Sigs() internal pure returns (bytes[] memory) {
        bytes[] memory sigs = new bytes[](1);

        // sig for second omni block (just parent hash and hash changed)
        // signatures generated in omni/orchestrator go test
        sigs[0] =
            hex"bd5a2f8c151214afe3ab9d3e2526735b99a77269e7722c0c1876935e5f23cba45aa51837a322e055149f19178c1d15a614ae89dfb429333f5b0ad22c2e865f251c";

        return sigs;
    }
}
